<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FreshMart - Your Online Grocery Store</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <!-- Enhanced Navigation -->
  <nav class="site-nav">
    <div class="nav-container">
      <a href="{{ url_for('home') }}" class="logo">FreshMart</a>

      <div class="nav-right">
        <div class="search-wrap">
          <input id="searchInput" type="search" placeholder="Search for products..." aria-label="Search products">
        </div>

        <a href="{{ url_for('department') }}" class="nav-link">Departments</a>
        <a href="{{ url_for('login') }}" class="nav-link">Account</a>
        
        <a href="{{ url_for('bag_page') }}" class="bag-link">
          <span>🛒</span>
          <span>Cart</span>
          <span id="bagCount" class="badge">0</span>
        </a>
      </div>
    </div>
  </nav>

  <main>
    <div class="home-container">
      <!-- Hero Banner -->
      <section class="hero-banner">
        <div class="hero-content">
          <h1>Fresh Groceries Delivered Daily</h1>
          <p>Get farm-fresh produce, quality meats, and pantry essentials delivered right to your door</p>
          <div class="promo-badges">
            <div class="promo-badge">
              <span>🚚</span>
              <span>Free Delivery on $50+</span>
            </div>
            <div class="promo-badge">
              <span>🌱</span>
              <span>100% Organic Options</span>
            </div>
            <div class="promo-badge">
              <span>⏰</span>
              <span>Same Day Delivery</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Categories Section -->
      <section class="categories-section container">
        <div class="section-header">
          <h2 class="section-title">Shop by Category</h2>
        </div>
        <div class="categories-grid">
          <div class="category-card" data-category="produce">
            <div class="category-icon">🥬</div>
            <div class="category-name">Fresh Produce</div>
          </div>
          <div class="category-card" data-category="meat">
            <div class="category-icon">🥩</div>
            <div class="category-name">Meat & Seafood</div>
          </div>
          <div class="category-card" data-category="dairy">
            <div class="category-icon">🥛</div>
            <div class="category-name">Dairy & Eggs</div>
          </div>
          <div class="category-card" data-category="bakery">
            <div class="category-icon">🥖</div>
            <div class="category-name">Bakery</div>
          </div>
          <div class="category-card" data-category="frozen">
            <div class="category-icon">🧊</div>
            <div class="category-name">Frozen Foods</div>
          </div>
          <div class="category-card" data-category="pantry">
            <div class="category-icon">🥫</div>
            <div class="category-name">Pantry</div>
          </div>
          <div class="category-card" data-category="beverages">
            <div class="category-icon">🥤</div>
            <div class="category-name">Beverages</div>
          </div>
          <div class="category-card" data-category="snacks">
            <div class="category-icon">🍿</div>
            <div class="category-name">Snacks</div>
          </div>
        </div>
      </section>

      <!-- Products Section -->
      <section id="productsSection" class="container">
        <div class="section-header">
          <h2 class="section-title">Featured Products</h2>
        </div>
        <div id="productGrid" class="product-grid">
          {% if products %}
            {% for p in products %}
              {% set stock_class = 'in-stock' if p.QuantityInStock > 10 else 'low-stock' %}
              {% set product_emoji = ['🍎', '🥕', '🥦', '🍊', '🥑', '🍇', '🥬', '🫐'][loop.index0 % 8] %}
              <div class="product-card" data-product-id="{{ p.ProductID }}" data-name="{{ p.Name }}" data-description="{{ p.Description }}" data-price="{{ p.Price }}">
                <div class="product-image">
                  {{ product_emoji }}
                  {% if loop.index % 4 == 0 %}
                  <span class="sale-badge">SALE</span>
                  {% endif %}
                </div>
                <div class="product-details">
                  <div class="product-header">
                    <h3>{{ p.Name }}</h3>
                  </div>
                  <p class="product-desc">{{ p.Description or 'Fresh and high quality product' }}</p>
                  <div class="product-meta">
                    <div>
                      <span class="price">${{ '%.2f'|format(p.Price) }}</span>
                      <div class="unit-price">per unit</div>
                    </div>
                    <span class="stock {{ stock_class }}">
                      {% if p.QuantityInStock > 10 %}
                        ✓ In Stock
                      {% else %}
                        Only {{ p.QuantityInStock }} left
                      {% endif %}
                    </span>
                  </div>
                  <button class="add-btn" type="button" onclick="addToCart({{ p.ProductID }})">
                    <span>🛒</span>
                    <span>Add to Cart</span>
                  </button>
                </div>
              </div>
            {% endfor %}
          {% else %}
            <p style="grid-column: 1/-1; text-align: center; color: var(--text-light);">
              No products available at the moment. Please check back later!
            </p>
          {% endif %}
        </div>
      </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <h3>About FreshMart</h3>
          <ul>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="#">Press</a></li>
            <li><a href="#">Sustainability</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Customer Service</h3>
          <ul>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">FAQs</a></li>
            <li><a href="#">Shipping Info</a></li>
            <li><a href="#">Returns</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="#">Weekly Deals</a></li>
            <li><a href="#">Gift Cards</a></li>
            <li><a href="#">Recipes</a></li>
            <li><a href="#">Store Locator</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Connect</h3>
          <ul>
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Twitter</a></li>
            <li><a href="#">Instagram</a></li>
            <li><a href="#">Newsletter</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 FreshMart. All rights reserved. | Privacy Policy | Terms of Service</p>
      </div>
    </footer>
  </main>

  <!-- Provide products array to client-side JS -->
  <script>
    window.PRODUCTS = {{ products|tojson }};
  </script>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
